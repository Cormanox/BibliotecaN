<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nintendo switch</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="popup-overlay" class="popup-overlay">
        <div class="popup-content">
            <span class="popup-close" id="popup-close">&times;</span>

            <div class="popup-icon">
                    <path fill="currentColor" d="M320-160h320v-80H320v80Zm0-120h320v-80H320v80ZM233-400l-73-73 51-51 73 73-51 51Zm545 0 51-51-73-73-51 51 73 73ZM480-80q-141 0-240.5-99.5T140-420q0-104 60-199t160-151v100q-88 43-124 122.5T200-420q0 117 81.5 198.5T480-140q117 0 198.5-81.5T760-420q0-94-36-173.5T600-716v-100q100 56 160 151t60 199q0 141-99.5 240.5T480-80Z"/>
                </svg>
            </div>

            <h3>¡Bienvenido a la Biblioteca de Juegos!</h3>
            <p class="popup-intro">Sigue estos sencillos pasos para elegir tus juegos:</p>

            <ol class="popup-steps">
                <li><strong>Explora y selecciona:</strong> Haz clic en hasta 5 juegos que te interesen.</li>
                <li><strong>Revisa tu lista:</strong> Aparecerán a la izquierda, en tu carrito de selección o arriba del todo si esta en teléfono</li>
                <li><strong>¡Contáctame!</strong> Cuando termines, usa el botón de WhatsApp para enviar tu lista.</li>
            </ol>

            <button class="popup-cta-btn" id="popup-cta-btn">¡Entendido!</button>
        </div>
    </div>

    <div id="not-found-popup" class="popup-overlay">
        <div class="popup-content">
            <span class="popup-close" id="not-found-close">&times;</span>
            <h3>Juego no encontrado</h3>
            <p>Lo sentimos, el juego que buscas no está en nuestra biblioteca.</p>
            <p>¡Pero no te preocupes! Puedes agregarlo manualmente a tu lista de seleccionados usando el botón <strong>"Agregar otro juego"</strong> en el carrito.</p>
        </div>
    </div>

    <div class="main-layout">
        <aside class="selected-games-container">
            <h3>Juegos Seleccionados</h3>
            <p><strong><span id="selection-count">0</span>/5</strong> seleccionados</p>
            <ul id="selected-games-list">
            </ul>
            <div class="cart-actions">
                <button id="add-custom-game-btn" class="custom-game-btn">Agregar otro juego</button>
                <button id="clear-cart-btn" class="clear-cart-btn">Vaciar Carrito</button>
                <a id="whatsapp-link" href="#" target="_blank" class="whatsapp-link">
                    <button class="whatsapp-btn">
                        <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><path fill="currentColor" d="M16.75,13.96C17,14.26 17.11,14.72 16.96,15.2C16.82,15.65 16.2,16.11 15.6,16.26C15,16.42 14.34,16.5 13.22,16.04C12.1,15.58 10.93,14.83 9.92,13.81C8.91,12.8 8.16,11.63 7.7,10.5C7.24,9.38 7.33,8.72 7.48,8.12C7.64,7.52 8.1,6.97 8.56,6.82C9,6.67 9.46,6.78 9.76,7.03C10.06,7.28 10.21,7.5 10.33,7.75C10.46,8 10.54,8.24 10.46,8.44C10.38,8.64 10.28,8.78 10.13,8.98C9.97,9.19 9.85,9.33 9.73,9.45C9.6,9.58 9.5,9.69 9.58,9.85C9.65,10 9.95,10.55 10.4,11C10.85,11.45 11.4,11.75 11.56,11.82C11.72,11.9 11.83,12 11.95,11.87C12.08,11.75 12.22,11.63 12.42,11.47C12.63,11.32 12.77,11.22 12.97,11.14C13.17,11.06 13.41,11.14 13.66,11.26C13.91,11.39 14.13,11.54 14.38,11.66C14.63,11.79 14.74,11.95 14.62,12.2C14.5,12.45 13.3,13.56 13.3,13.56S13.26,13.65 13.4,13.8C13.55,13.94 16.46,13.65 16.75,13.96M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22C13.66,22 15.28,21.54 16.68,20.72L21.36,22.1L22.1,16.68C22.88,15.28 23.34,13.66 23.34,12C23.34,6.48 18.2,2 12,2M12,4C17.5,4 21.33,8.5 21.33,12C21.33,13.5 20.93,14.93 20.23,16.2L20,16.68L20.12,18.23L18.67,18.35L18.2,18.13C16.87,18.83 15.44,19.23 14,19.23C12,19.23 4,19.23 4,12C4,8.5 7.5,4 12,4Z"></path></svg>
                        Enviar por WhatsApp
                    </button>
                </a>
            </div>
        </aside>

        <div class="container">
            <h1> Biblioteca de Juegos<br>Nintendo Switch Mágica</h1>
            
            <form id="search-form" class="search-form">
                <input type="text" id="search-input" class="search-input" placeholder="Buscar un juego...">
                <button type="submit" class="search-btn">Buscar</button>
            </form>

            <p>Aquí les comparto mi colección de juegos de Nintendo Switch. ¡Espero que les guste!</p>
            <h2>Si no encuentras algún juego que quieras dime y con gusto los descargo</h2>

            <ul class="game-grid">
                 <li class="game-card">
                    <img src="https://soporteconsolascr.com/cdn/shop/files/81UfEdvf2kL._SL1500_1024x1024.jpg?v=1718046869" alt="Carátula Animal Crossing: New Horizons">
                    <span class="game-title">Animal Crossing: New Horizons</span>
                </li>
                <li class="game-card">
                    <img src="https://images.launchbox-app.com//fa7b64c8-7845-4c4a-a86d-b87d0135159a.png" alt="Carátula Balatro">
                    <span class="game-title">Balatro</span>
                </li>
                <li class="game-card">
                    <img src="https://juegosdigitalesmex.com/s/img/wp-content/uploads/2022/02/blasphemous-nintendo.jpg" alt="Carátula Blasphemous">
                    <span class="game-title">Blasphemous</span>
                </li>
                <li class="game-card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3Lwp2wAu1_uoEwPNMFMMxMocS2DpdcheKrw&s" alt="Carátula Cult of the Lamb">
                    <span class="game-title">Cult of the Lamb</span>
                </li>
                <li class="game-card">
                    <img src="https://m.media-amazon.com/images/I/71-3hGapiVL._AC_SL1500_.jpg" alt="Carátula Cuphead">
                    <span class="game-title">Cuphead</span>
                </li>
                <li class="game-card">
                    <img src="https://m.media-amazon.com/images/I/81zy-KHgh1L.__AC_SX300_SY300_QL70_ML2_.jpg" alt="Donkey Kong Country Returns HD">
                    <span class="game-title">Donkey Kong Country Returns HD</span>
                </li>
                <li class="game-card">
                    <img src="https://images.ctfassets.net/pkeegl0voupm/74Nc62Bsz3KS492op4owta/af8dce90a88f3a409f641e92292aa747/DBFZ_NSW_2D_Packshot_EN_copy.png?fm=jpg&q=60" alt="Carátula Dragon Ball FighterZ">
                    <span class="game-title">DRAGON BALL FIGHTER Z</span>
                </li>
                <li class="game-card">
                    <img src="https://m.media-amazon.com/images/I/718OD6QW+2L._AC_SL1500_.jpg" alt="Carátula Dragon Ball Z: Kakarot">
                    <span class="game-title">DRAGON BALL Z KAKAROT</span>
                </li>
                <li class="game-card">
                    <img src="https://images.launchbox-app.com//cb77488c-2389-4c8e-bf7d-dc398c56e8fa.png" alt="Carátula Grand Theft Auto: San Andreas (Definitive Edition)">
                    <span class="game-title">Grand Theft Auto: San Andreas</span>
                </li>
                <li class="game-card">
                    <img src="https://m.media-amazon.com/images/I/81mdc6bcbNL.jpg" alt="Carátula Hello Kitty Island Adventure">
                    <span class="game-title">Hello Kitty Island Adventure</span>
                </li>
                <li class="game-card">
                    <img src="https://media.vandal.net/m/120945/high-on-life-2022126116143_2.jpg" alt="Carátula High On Life">
                    <span class="game-title">High On Life</span>
                </li>
                <li class="game-card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQGgkoPBD1z7FaX-Lq07qi0YueARrkAPpeaQQ&s" alt="Carátula Hollow Knight">
                    <span class="game-title">Hollow Knight</span>
                </li>
                 <li class="game-card">
                    <img src="https://m.media-amazon.com/images/I/71xlRFc7-VL.jpg" alt="Carátula Little Nightmares Complete Edition">
                    <span class="game-title">Little Nightmares Complete Edition</span>
                </li>
                <li class="game-card">
                    <img src="https://i.3djuegos.com/juegos/16829/little_nightmares_2/fotos/ficha/little_nightmares_2-5358110.jpg" alt="Carátula Little Nightmares II">
                    <span class="game-title">Little Nightmares II</span>
                </li>
                <li class="game-card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcStU9ACoNDBr7U18tKsyuyc0FJ7vF1JH3etaw&s" alt="Carátula Mario Kart 8 Deluxe">
                    <span class="game-title">Mario Kart 8 Deluxe + MOD</span>
                </li>
                <li class="game-card">
                    <img src="https://images.launchbox-app.com//6d01873d-e3aa-46e8-b81b-039435e58201.jpg" alt="Carátula MARVEL vs CAPCOM Fighting Collection">
                    <span class="game-title">MARVEL vs CAPCOM Fighting Collection</span>
                </li>
                <li class="game-card">
                    <img src="https://uvejuegos.com/img/caratulas/58432/64b3addf459c502d536cd46d3fbf8cae.jpg" alt="Carátula Minecraft Story Mode">
                    <span class="game-title">Minecraft Story Mode<br>(Todas las Temporadas)</span>
                </li>
                <li class="game-card">
                    <img src="https://images.launchbox-app.com//90bdb5bc-2c36-4154-b3c9-e3b94db16001.jpg" alt="Carátula NARUTO X BORUTO Ultimate Ninja STORM CONNECTIONS">
                    <span class="game-title">NARUTO X BORUTO Ultimate Ninja STORM CONNECTIONS</span>
                </li>
                <li class="game-card">
                    <img src="https://images.launchbox-app.com//b8aa9177-ab93-4c07-adcb-be77b6dc9a60.png" alt="Carátula Nintendo Switch Online + Expansion Pack">
                    <span class="game-title">Nintendo 64 – Nintendo Switch Online</span>
                </li>
                <li class="game-card">
                    <img src="https://images.launchbox-app.com//50a53513-fc2a-4d67-9c8b-c93f3df6007b.png" alt="Carátula Game Boy Nintendo Switch Online">
                    <span class="game-title">Game Boy Nintendo Switch Online</span>
                </li>
                <li class="game-card">
                    <img src="https://images.launchbox-app.com//41245a8b-29d3-4593-b8b9-cdd7f19000e2.png" alt="Carátula SEGA Genesis Nintendo Switch Online">
                    <span class="game-title">SEGA Genesis Nintendo Switch Online</span>
                </li>
                <li class="game-card">
                    <img src="https://images.launchbox-app.com//433bceae-dca3-4c7c-8356-78e2cc139381.png" alt="Carátula Game Boy Advance Nintendo Switch Online">
                    <span class="game-title">Game Boy Advance Nintendo Switch Online</span>
                </li>
                <li class="game-card">
                    <img src="https://images.launchbox-app.com//984500da-a7b3-4c4f-b4d6-bfdca1823843.jpg" alt="Carátula Super Nintendo Entertainment System Nintendo Switch Online">
                    <span class="game-title">Super Nintendo Entertainment System Nintendo Switch Online</span>
                </li>
                <li class="game-card">
                    <img src="https://images.launchbox-app.com/828f5790-7a94-420b-8e19-2de2e3f72026.png" alt="Carátula Nintendo Entertainment System Nintendo Switch Online">
                    <span class="game-title">Nintendo Entertainment System Nintendo Switch Online</span>
                <li class="game-card">
                    <img src="https://rawfury.com/wp-content/uploads/2023/03/PizzaPossum_BoxArt-1.png" alt="Carátula Pizza Possum">
                    <span class="game-title">Pizza Possum</span>
                </li>
                <li class="game-card">
                    <img src="https://uvejuegos.com/img/caratulas/61086/Pok%C3%83%C2%A9mon-Let's-Go-Pikachu!-EU.jpg" alt="Carátula Pokémon Let's Go, Pikachu!">
                    <span class="game-title">Pokémon Let's Go, Pikachu!</span>
                </li>
                <li class="game-card">
                    <img src="https://cdn.hobbyconsolas.com/sites/navi.axelspringer.es/public/media/image/2021/05/pokemon-diamante-brillante-perla-reluciente-2348559.jpg?tf=3840x" alt="Carátula Pokémon Diamante Brillante">
                    <span class="game-title">Pokémon Diamante Brillante</span>
                </li>
                <li class="game-card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS6jvy069giLbYhbJgVJv8jOa8Jid9BP3OhBg&s" alt="Carátula Pokémon Sword">
                    <span class="game-title">Pokémon Legends Arceus</span>
                </li>
                <li class="game-card">
                    <img src="https://m.media-amazon.com/images/I/81YImpJ7XdL.jpg" alt="Carátula Red Dead Redemption">
                    <span class="game-title">Red Dead Redemption</span>
                </li>
                <li class="game-card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR04gOg1y-xKVeQrHPXtmL2j8CI1hGmFk6zCw&s" alt="Carátula Super Mario 3D All-Stars">
                    <span class="game-title">Super Mario 3D All-Stars</span>
                </li>
                <li class="game-card">
                    <img src="https://i.pinimg.com/736x/c2/10/ae/c210ae920cc7061409748717ab7c5f0e.jpg" alt="Carátula Super Mario Odyssey">
                    <span class="game-title">Super Mario Odyssey</span>
                </li>
                <li class="game-card">
                    <img src="https://soporteconsolascr.com/cdn/shop/files/MarioRPG_480x480.jpg?v=1706198595" alt="Carátula Super Mario RPG">
                    <span class="game-title">Super Mario RPG</span>
                </li>
                <li class="game-card">
                    <img src="https://uvejuegos.com/img/caratulas/56704/tloz-breath-of-the-wild-eur.jpg" alt="Carátula The Legend of Zelda: Breath of the Wild">
                    <span class="game-title">The Legend of Zelda: Breath of the Wild</span>
                </li>
                <li class="game-card">
                    <img src="https://glitchgames.com.mx/cdn/shop/files/zelda_620x.jpg?v=1756917086" alt="Carátula The Legend of Zelda Tears of The Kingdom">
                    <span class="game-title">The Legend of Zelda Tears of The Kingdom</span>
                </li>
                 <li class="game-card">
                    <img src="https://images.launchbox-app.com//624eec11-9f1d-46d9-b6e1-9ca3b7d879eb.png" alt="Carátula TThe Legend of Zelda Skyward Sword HD">
                    <span class="game-title">The Legend of Zelda Skyward Sword HD</span>
                 </li>
                <li class="game-card">
                    <img src="https://i.3djuegos.com/juegos/16579/the_walking_dead_the_telltale_definitive_series/fotos/ficha/the_walking_dead_the_telltale_definitive_series-4846658.webp" alt="Carátula The Walking Dead Definitive Series">
                    <span class="game-title">The Walking Dead Definitive Series<br>(Todas las Temporadas)</span>
                </li>
                <li class="game-card">
                    <img src="https://uvejuegos.com/img/caratulas/67776/unpacking-switch-japon.jpg" alt="Carátula Unpacking">
                    <span class="game-title">Unpacking</span>
                </li>
            </ul>
        </div>
    </div>

    <script>
        window.addEventListener('load', function() {
            // Lógica de Pop-ups
            const welcomePopup = document.getElementById('popup-overlay');
            const welcomeCloseBtn = document.getElementById('popup-close');
            const welcomeCtaBtn = document.getElementById('popup-cta-btn'); 
            if(welcomePopup) welcomePopup.style.display = 'flex';
            const closeWelcomePopup = () => { if(welcomePopup) welcomePopup.style.display = 'none'; };
            if(welcomeCloseBtn) welcomeCloseBtn.addEventListener('click', closeWelcomePopup);
            if(welcomeCtaBtn) welcomeCtaBtn.addEventListener('click', closeWelcomePopup);
            if(welcomePopup) welcomePopup.addEventListener('click', (event) => { if (event.target === welcomePopup) closeWelcomePopup(); });

            const notFoundPopup = document.getElementById('not-found-popup');
            const notFoundCloseBtn = document.getElementById('not-found-close');
            const closeNotFoundPopup = () => { if(notFoundPopup) notFoundPopup.style.display = 'none'; };
            if(notFoundCloseBtn) notFoundCloseBtn.addEventListener('click', closeNotFoundPopup);
            if(notFoundPopup) notFoundPopup.addEventListener('click', (event) => { if (event.target === notFoundPopup) closeNotFoundPopup(); });

            // --- LÓGICA DEL CARRITO DE SELECCIÓN ---
            const maxSelection = 5;
            const gameCards = document.querySelectorAll('.game-card');
            const selectedGamesList = document.getElementById('selected-games-list');
            const selectionCount = document.getElementById('selection-count');
            const clearCartBtn = document.getElementById('clear-cart-btn');
            const addCustomGameBtn = document.getElementById('add-custom-game-btn');
            const whatsappLink = document.getElementById('whatsapp-link');
            const phoneNumber = '50660331197'; 
            const selectedGames = new Set();
            
            // --- LÓGICA DE BÚSQUEDA ---
            const searchForm = document.getElementById('search-form');
            const searchInput = document.getElementById('search-input');

            if(searchForm) {
                searchForm.addEventListener('submit', (event) => {
                    event.preventDefault();
                    const query = searchInput.value.trim().toLowerCase();
                    if (query === '') return;

                    let gameFound = false;
                    for (const card of gameCards) {
                        const gameTitle = card.querySelector('.game-title').innerText.toLowerCase();
                        if (gameTitle.includes(query)) {
                            card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            
                            card.classList.add('highlight');
                            setTimeout(() => {
                                card.classList.remove('highlight');
                            }, 2500);

                            gameFound = true;
                            break; 
                        }
                    }

                    if (!gameFound) {
                        if(notFoundPopup) notFoundPopup.style.display = 'flex';
                    }
                    searchInput.value = '';
                });
            }

            const findCardByTitle = (title) => {
                for (const card of gameCards) {
                    if (card.querySelector('.game-title').innerHTML === title) return card;
                }
                return null;
            };

            const deselectGame = (gameTitle) => {
                const card = findCardByTitle(gameTitle);
                if (card) card.classList.remove('selected');
                selectedGames.delete(gameTitle);
                updateSelectionDisplay();
            };

            const updateSelectionDisplay = () => {
                selectedGamesList.innerHTML = '';
                const hasSelection = selectedGames.size > 0;
                if(clearCartBtn) clearCartBtn.style.display = hasSelection ? 'block' : 'none';
                if(whatsappLink) whatsappLink.style.display = hasSelection ? 'block' : 'none';

                selectedGames.forEach(gameTitle => {
                    const listItem = document.createElement('li');
                    if (!findCardByTitle(gameTitle)) listItem.classList.add('custom-game');

                    const titleSpan = document.createElement('span');
                    titleSpan.textContent = gameTitle.replace(/<br\s*\/?>/ig, ' ');
                    listItem.appendChild(titleSpan);

                    const removeBtn = document.createElement('button');
                    removeBtn.innerHTML = '&times;';
                    removeBtn.className = 'remove-game-btn';
                    removeBtn.title = 'Quitar juego';
                    removeBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        deselectGame(gameTitle);
                    });
                    listItem.appendChild(removeBtn);
                    selectedGamesList.appendChild(listItem);
                });

                if(hasSelection && whatsappLink) {
                    let message = '¡Hola! 👋 Quisiera consultar sobre estos juegos:\n\n';
                    let count = 1;
                    selectedGames.forEach(gameTitle => {
                        const cleanTitle = gameTitle.replace(/<br\s*\/?>/ig, ' ');
                        message += `*${count}.* ${cleanTitle}\n`;
                        count++;
                    });
                    message += '\n¡Gracias! 😊';
                    const encodedMessage = encodeURIComponent(message);
                    whatsappLink.href = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
                }

                if(selectionCount) selectionCount.textContent = selectedGames.size;
            };

            gameCards.forEach(card => {
                card.addEventListener('click', () => {
                    const gameTitle = card.querySelector('.game-title').innerHTML;
                    if (selectedGames.has(gameTitle)) {
                        deselectGame(gameTitle);
                    } else {
                        if (selectedGames.size < maxSelection) {
                            card.classList.add('selected');
                            selectedGames.add(gameTitle);
                            updateSelectionDisplay();
                        } else {
                            alert('Puedes seleccionar un máximo de ' + maxSelection + ' juegos.');
                        }
                    }
                });
            });

            if(clearCartBtn) clearCartBtn.addEventListener('click', () => {
                [...selectedGames].forEach(title => deselectGame(title));
            });
            
            if(addCustomGameBtn) addCustomGameBtn.addEventListener('click', () => {
                if (selectedGames.size >= maxSelection) {
                    alert('Has alcanzado el límite de ' + maxSelection + ' juegos.');
                    return;
                }
                const customGameName = prompt("Escribe el nombre del juego que deseas agregar:");
                if (customGameName && customGameName.trim() !== '') {
                    const cleanName = customGameName.trim();
                    let isDuplicate = [...selectedGames].some(g => g.replace(/<br\s*\/?>/ig, ' ').toLowerCase() === cleanName.toLowerCase());
                    if (isDuplicate) {
                        alert('"' + cleanName + '" ya está en tu lista.');
                    } else {
                        selectedGames.add(cleanName);
                        updateSelectionDisplay();
                    }
                }
            });

            updateSelectionDisplay();
        });
    </script>
</body>
</html>